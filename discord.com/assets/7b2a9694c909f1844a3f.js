"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[56133],{529245:(e,t,n)=>{n.d(t,{Z:()=>D});var r=n(173436),o=n(741655),a=n(549425),i=n(159500),l=n(212271),c=n(682964),s=n(923463),u=n(710536),f=n(251356),p=n(25765),d=n(318615),h=n(538796),y=n(617509),O=n(819525),_=n(790948),b=n(302561),E=n(11870),g=n(402124),m=n(861842),v=n(897576),P=n(461061),A=n(959797);function L(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){n(e);return}l.done?t(c):Promise.resolve(c).then(r,o)}function w(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){w(e,t,n[t])}))}return e}function R(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var j=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;(r=0,o)&&(a=[2&a[0],o.value]);switch(a[0]){case 0:case 1:o=a;break;case 4:i.label++;return{value:a[1],done:!1
};case 5:i.label++;r=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1];o=a;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(a);break}o[2]&&i.ops.pop();i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e];r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};function T(e){var t,u,f,v,w=e.channelId,M=e.uploads,D=e.draftType,S=e.parsedMessage,U=e.options,Z=void 0===U?{}:U,C=function(){""!==N.content&&""===g.Z.getDraft(w,D)&&o.Z.saveDraft(w,N.content,D);0===m.Z.getUploadCount(w,D)&&i.Z.setUploads({channelId:w,uploads:M,draftType:D})},x=(null===(t=c.Z.getCurrentConfig({}))||void 0===t?void 0:t.enabled)?new p.Z(P.ANM.MESSAGES(w)):new d.t(P.ANM.MESSAGES(w)),N={content:"",nonce:"",channel_id:w,type:P.uaV.DEFAULT,sticker_ids:null==Z?void 0:Z.stickerIds,
captcha_key:null==Z||null===(u=Z.captchaPayload)||void 0===u?void 0:u.captcha_key,captcha_rqtoken:null==Z||null===(f=Z.captchaPayload)||void 0===f?void 0:f.captcha_rqtoken};null!=S&&(N.content=null==S?void 0:S.content);if(null!=E.Z.getPendingReply(w)){N.type=P.uaV.REPLY;N.message_reference=Z.messageReference;N.allowed_mentions=Z.allowedMentions;(0,b.A6)(w)}var k,G,B,F=(0,_.ZP)({channelId:w,content:N.content,tts:null!==(v=null==S?void 0:S.tts)&&void 0!==v&&v,type:N.type,messageReference:N.message_reference});N.nonce=F.id;F.nonce=N.nonce;x.on("start",(function(e){k=(0,O.e5)(R(I({},F),{id:e.id}));r.Z.dispatch({type:"UPLOAD_START",channelId:w,file:e,message:k,uploader:x})}));x.on("progress",(function(e){r.Z.dispatch({type:"UPLOAD_PROGRESS",channelId:w,file:e})}));x.on("error",(B=(G=function(e,t,o){var i,c;return j(this,(function(u){switch(u.label){case 0:r.Z.dispatch({type:"UPLOAD_FAIL",channelId:w,file:e,messageRecord:k});if(t===P.evJ.EXPLICIT_CONTENT){a.Z.sendClydeError(w,t);return[2]}
if(t===P.evJ.AUTOMOD_MESSAGE_BLOCKED){i={code:t,message:null==o?void 0:o.message};c=null==k?null:{type:s.$V.SEND,message:R(I({},k),{channelId:w})};(0,l.xT)({title:A.Z.Messages.UPLOAD_AREA_UPLOAD_FAILED_TITLE,help:(0,y.uF)(c,i)});return[2]}return null==o||null==o.captcha_key||null!=Z.captchaPayload?[3,2]:[4,n.e(41704).then(n.bind(n,141704))];case 1:u.sent().default.showCaptchaAsync((0,h.z)(o)).then((function(e){T({channelId:w,uploads:M,draftType:D,parsedMessage:S,options:R(I({},Z),{captchaPayload:e})})}),(function(){C()}));return[3,3];case 2:(0,l.xT)({title:A.Z.Messages.UPLOAD_AREA_UPLOAD_FAILED_TITLE,help:A.Z.Messages.UPLOAD_AREA_UPLOAD_FAILED_RETRY_HELP});C();u.label=3;case 3:return[2]}}))},function(){var e=this,t=arguments;return new Promise((function(n,r){var o=G.apply(e,t);function a(e){L(o,n,r,a,i,"next",e)}function i(e){L(o,n,r,a,i,"throw",e)}a(void 0)}))}),function(e,t,n){return B.apply(this,arguments)}));x.on("complete",(function(e){r.Z.dispatch({type:"UPLOAD_COMPLETE",
channelId:w,file:e,aborted:x._aborted})}));x.uploadFiles(M,N)}function M(e){var t=e.channelId,n=e.file,i=e.draftType,c=e.message,s={content:"",tts:!1,hasSpoiler:e.hasSpoiler,filename:e.filename};if(null!=c){s.content=c.content;s.tts=c.tts;s.channel_id=c.channel_id;var u=E.Z.getPendingReply(t);if(null!=u){var f=a.Z.getSendMessageOptionsForReply(u);s.type=P.uaV.REPLY;s.message_reference=f.messageReference;s.allowed_mentions=f.allowedMentions;(0,b.A6)(t)}}var p=new d.Z(P.ANM.MESSAGES(t));p.on("start",(function(e){r.Z.dispatch({type:"UPLOAD_START",channelId:t,file:e,uploader:p})}));p.on("progress",(function(e){r.Z.dispatch({type:"UPLOAD_PROGRESS",channelId:t,file:e})}));p.on("error",(function(e,u){r.Z.dispatch({type:"UPLOAD_FAIL",channelId:t,file:e});if(u!==P.evJ.EXPLICIT_CONTENT){(0,l.xT)({title:A.Z.Messages.UPLOAD_AREA_UPLOAD_FAILED_TITLE,help:A.Z.Messages.UPLOAD_AREA_UPLOAD_FAILED_HELP.format({onClick:function(){(0,v.Mr)(l.Am);M({channelId:t,file:n,draftType:i,message:c})}})})
;""!==s.content&&""===g.Z.getDraft(t,i)&&o.Z.saveDraft(t,s.content,i)}else a.Z.sendClydeError(t,u)}));p.on("complete",(function(e){r.Z.dispatch({type:"UPLOAD_COMPLETE",channelId:t,file:e})}));p.upload(n,s)}const D={instantBatchUpload:function(e,t,n){var r;if(null===(r=c.Z.getCurrentConfig({}))||void 0===r?void 0:r.enabled){var o=Array.from(t).map((function(t){return new u.n({file:t,platform:f.o.WEB},e)}));T({channelId:e,uploads:o,draftType:n})}else Array.from(t).forEach((function(t){M({channelId:e,file:t,draftType:n})}))},upload:M,uploadFiles:T,cancel:function(e){r.Z.dispatch({type:"UPLOAD_CANCEL_REQUEST",file:e});if(null!=e.draftContent&&null!=e.channelId){""===g.Z.getDraft(e.channelId,g.d.ChannelMessage)&&r.Z.dispatch({type:"DRAFT_SAVE",channelId:e.channelId,draft:e.draftContent,draftType:g.d.ChannelMessage})}}}},290671:(e,t,n)=>{n.d(t,{bd:()=>c,J6:()=>s,pA:()=>u});var r,o,a=n(334276),i=n.n(a);function l(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,
writable:!0}):e[t]=n;return e}!function(e){e[e.IMAGE=0]="IMAGE";e[e.DOCUMENT=1]="DOCUMENT";e[e.CODE=2]="CODE"}(r||(r={}));var c=(l(o={},r.IMAGE,i().image),l(o,r.DOCUMENT,i().document),l(o,r.CODE,i().code),o),s=[r.DOCUMENT,r.IMAGE,r.CODE],u=[r.IMAGE,r.IMAGE,r.IMAGE]},509618:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(785893),o=(n(667294),n(294184)),a=n.n(o),i=n(290671),l=n(334276),c=n.n(l);const s=function(e){var t=e.icons,n=e.className;return(0,r.jsxs)("div",{className:a()(c().icons,n),children:[(0,r.jsx)("div",{className:c().wrapOne,children:(0,r.jsx)("div",{className:a()(c().icon,c().one,i.bd[t[0]])})}),(0,r.jsx)("div",{className:c().wrapThree,children:(0,r.jsx)("div",{className:a()(c().icon,c().three,i.bd[t[2]])})}),(0,r.jsx)("div",{className:c().wrapTwo,children:(0,r.jsx)("div",{className:a()(c().icon,c().two,i.bd[t[1]])})})]})}},212271:(e,t,n)=>{n.d(t,{Am:()=>M,xT:()=>D})
;var r=n(785893),o=n(667294),a=n(294184),i=n.n(a),l=n(791462),c=n(509618),s=n(76710),u=n(859023),f=n(685351),p=n(371452),d=n(863419),h=n(237886),y=n(298716),O=n(461061),_=n(290671),b=n(959797),E=n(505021),g=n.n(E);function m(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function v(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function P(e){var t=e.onClose,n=v(e,["onClose"]),a=(0,l.e7)([u.default],(function(){return u.default.getCurrentUser()})),E=(0,r.jsx)(c.Z,{icons:_.J6}),P=(0,s.J)()?b.Z.Messages.UPLOAD_AREA_PREMIUM_UPSELL_BODY_LINE_2_INCREASE:b.Z.Messages.UPLOAD_AREA_PREMIUM_UPSELL_BODY_LINE_2.format({
premiumMaxSize:b.Z.Messages.FILE_UPLOAD_LIMIT_PREMIUM_TIER_2}),A=o.useMemo((function(){var e=d.ZP.getUserMaxFileSize(a),t=(0,p.BU)(e/1024,{useKibibytes:!0}),n=b.Z.Messages.UPLOAD_AREA_PREMIUM_UPSELL_BODY_LINE_1.format({maxSize:t});switch(null==a?void 0:a.premiumType){case y.p9.TIER_0:n=b.Z.Messages.UPLOAD_AREA_PREMIUM_UPSELL_BODY_LINE_1_PREMIUM_TIER_0.format({maxSize:t});break;case y.p9.TIER_1:n=b.Z.Messages.UPLOAD_AREA_PREMIUM_UPSELL_BODY_LINE_1_PREMIUM_TIER_1.format({maxSize:t})}return n}),[a]),L=(0,r.jsxs)("div",{className:g().body,children:[(0,r.jsx)("span",{children:A}),(0,r.jsx)(f.x,{variant:"text-md/medium",children:P})]});return(0,r.jsx)(h.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){m(e,t,n[t])}))}return e}({artElement:E,
artContainerClassName:i()(g().artContainer),enableArtBoxShadow:!1,type:y.cd.UPLOAD_ERROR_UPSELL,title:b.Z.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,body:L,context:b.Z.Messages.UPLOAD_AREA_PREMIUM_UPSELL_BODY_LINE_1.format({maxSize:b.Z.Messages.FILE_UPLOAD_LIMIT_STANDARD}),glowUp:P,analyticsLocation:{section:O.jXE.FILE_UPLOAD_POPOUT},onClose:t},n))}var A=n(272729),L=n(67416),w=n(897576),I=n(334276),R=n.n(I);function j(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function T(e){var t=e.title,n=e.help,o=e.showPremiumUpsell,a=e.transitionState,l=e.icons,s=e.onClose,u=(0,A.Dt)(),f=null!=l?l:_.J6;return o?(0,r.jsx)(P,{transitionState:a,onClose:s}):(0,r.jsx)(L.Y0,{size:L.Cg.DYNAMIC,"aria-labelledby":u,transitionState:a,children:(0,r.jsx)("div",{className:i()(R().uploadDropModal,R().error),children:(0,r.jsxs)("div",{className:R().inner,children:[(0,r.jsx)(c.Z,{icons:f}),(0,r.jsx)("div",{id:u,className:R().title,children:t}),(0,
r.jsx)("div",{className:R().instructions,children:n})]})})})}var M="UPLOAD_ERROR_MODAL_KEY";function D(e){(0,w.h7)((function(t){return(0,r.jsx)(T,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){j(e,t,n[t])}))}return e}({},t,e))}),{modalKey:M})}},25765:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(675860),o=n(595200),a=n(251356),i=n(561388),l=n(959797);function c(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){n(e);return}l.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,l,"next",e)}function l(e){c(a,r,o,i,l,"throw",e)}i(void 0)}))}}function u(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function p(e,t,n){p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}};return p(e,t,n||e)}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return d(e)}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){f(e,t,n[t])}))}return e}function y(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function O(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){_=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return _(e,t)}var b=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}var g=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;(r=0,o)&&(a=[2&a[0],o.value]);switch(a[0]){case 0:case 1:o=a;break;case 4:i.label++;return{value:a[1],done:!1};case 5:i.label++;r=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}
if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1];o=a;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(a);break}o[2]&&i.ops.pop();i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e];r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&_(e,t)}(n,e);var t=E(n);function n(){u(this,n);return t.apply(this,arguments)}var c=n.prototype;c.uploadFiles=function(e,t,r){var a=this,i=this;return s((function(){var c;return g(this,(function(s){switch(s.label){case 0:p(d(n.prototype),"upload",a).call(i,{name:l.Z.Messages.ATTACHMENT_PROCESSING},t,e);s.label=1;case 1:s.trys.push([1,5,,6]);i.files=e;if(i._aborted)return[2];c=new AbortController;i._handleStart((function(){return c.abort()
}));return[4,i.compressAndCheckFileSize()];case 2:if(!s.sent())return[2];i.setUploadingTextForUI();return[4,(0,o.$)(i.files,!0,i._recomputeProgress.bind(i))];case 3:s.sent();return[4,i._createMessage(c.signal,t,r)];case 4:return[2,s.sent()];case 5:s.sent();i._handleError();return[3,6];case 6:return[2]}}))}))()};c._createMessage=function(e,t,n){var o=this;return s((function(){var l,c,s,u,f,p,d;return g(this,(function(O){switch(O.label){case 0:l=[];o.files.forEach((function(e,t){var n=(0,i.B)(e,t);e.item.platform===a.o.WEB&&l.push(h({},n))}));c=null!=n&&null!=t?o._addAttachmentsToPayload(t,n,l):y(h({},t),{attachments:l});s={url:o._url,body:c,signal:e};u="POST"===o._method?r.Z.post:r.Z.patch;O.label=1;case 1:O.trys.push([1,3,,4]);return[4,u(s)];case 2:f=O.sent();o._handleComplete(f.body);return[3,4];case 3:p=O.sent();o._handleError(null==p||null===(d=p.body)||void 0===d?void 0:d.code,null==p?void 0:p.body);return[3,4];case 4:return[2]}}))}))()};return n}(o.Z)},318615:(e,t,n)=>{n.d(t,{
Z:()=>P,t:()=>A});var r=n(675860),o=n(251356),a=n(927119),i=n(337823),l=n(561388),c=n(418368),s=n(461061),u=n(959797);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function d(e,t,n){d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}};return d(e,t,n||e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return h(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&g(e,t)}function O(e){
for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){p(e,t,n[t])}))}return e}function _(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){
var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function E(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t){g=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return g(e,t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}var P=function(e){y(n,e);var t=v(n)
;function n(){f(this,n);var e;(e=t.apply(this,arguments))._handleXHRProgress=function(t){e._handleProgress(t.loaded,t.total)};return e}n.prototype.upload=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this,a=t.hasSpoiler,i=t.filename,l=b(t,["hasSpoiler","filename"]);d(h(n.prototype),"upload",this).call(this,e,l);var c="POST"===this._method?r.Z.post:r.Z.patch,u=new AbortController,f=a?s._jL:"";c({url:this._url,fields:[{name:"payload_json",value:JSON.stringify(l)}],attachments:[{name:"file",file:e,filename:"".concat(f).concat(null!=i?i:e.name)}],onRequestProgress:this._handleXHRProgress,signal:u.signal}).then((function(e){if(e.ok)o._handleComplete(e.body);else{var t;o._handleError(null===(t=e.body)||void 0===t?void 0:t.code)}}),(function(e){var t;o._handleError(null===(t=e.body)||void 0===t?void 0:t.code)}));this._handleStart((function(){return u.abort()}))};return n}(a.Z),A=function(e){y(n,e);var t=v(n);function n(){f(this,n);var e
;(e=t.apply(this,arguments))._handleXHRProgress=function(t){e._handleProgress(t.loaded,t.total)};return e}n.prototype.uploadFiles=function(e,t,a){var s=this;d(h(n.prototype),"upload",this).call(this,{name:u.Z.Messages.ATTACHMENT_COMPRESSING},t);try{if(this._aborted)return;var f=1===e.length&&null!=e[0].filename?e[0].filename:u.Z.Messages.UPLOADING_FILES.format({count:e.length}),p=e.some((function(e){return e.isImage})),y=e.some((function(e){return e.isVideo})),b=(0,i.XM)((0,c.KZ)(e));this._file=_(O({},this._file),{size:b,name:f,hasVideo:y,hasImage:p,attachmentsCount:e.length});var E,g=[],m=[];e.forEach((function(e,t){var n=(0,l.B)(e,t);if(e.item.platform===o.o.WEB){m.push({name:"files[".concat(t,"]"),filename:n.filename,file:e.item.file});g.push(O({},n))}}));E=null!=a&&null!=t?this._addAttachmentsToPayload(t,a,g):_(O({},t),{attachments:g});var v="POST"===this._method?r.Z.post:r.Z.patch,P=new AbortController;v({url:this._url,fields:[{name:"payload_json",value:JSON.stringify(E)}],
attachments:m,signal:P.signal,onRequestProgress:this._handleXHRProgress}).then((function(e){if(e.ok)s._handleComplete(e.body);else{var t;s._handleError(null===(t=e.body)||void 0===t?void 0:t.code,e.body)}}),(function(e){var t;s._handleError(null===(t=e.body)||void 0===t?void 0:t.code,e.body)}));this._handleStart((function(){return P.abort()}))}catch(e){this._handleError()}};return n}(a.Z)},56133:(e,t,n)=>{n.d(t,{G:()=>E,d:()=>g});var r=n(825524),o=n(159500),a=n(529245),i=n(212271),l=n(251356),c=n(23816),s=n(67874),u=n(861842),f=n(859023),p=n(932847),d=n(337823),h=n(863419),y=n(418368),O=n(461061),_=n(298716),b=n(959797);function E(e,t){var n=f.default.getCurrentUser(),r=e.getGuildId(),o=d.dg(r),a=!0,l=!1,s=void 0;try{for(var u,p=t[Symbol.iterator]();!(a=(u=p.next()).done);a=!0){var E=u.value;if(E.size>o){(0,c.yw)(O.rMx.FILE_SIZE_LIMIT_EXCEEDED,{channel_id:e.id,guild_id:r,limit:o,filesize:E.size,type:"Upload Message Attachment Max Size Error"});(0,i.xT)({
title:b.Z.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,help:(0,y.BK)(n,r),showPremiumUpsell:!(0,h.M5)(n,_.p9.TIER_2)});return}}}catch(e){l=!0;s=e}finally{try{a||null==p.return||p.return()}finally{if(l)throw s}}(0,i.xT)({title:b.Z.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,help:b.Z.Messages.UPLOAD_AREA_REQUEST_LIMIT_HELP.format({maxSize:d.Ng(d.OC())})})}function g(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=c.requireConfirm,d=void 0===f||f,h=c.showLargeMessageDialog,_=void 0!==h&&h;if(!(e.length<1)){var g=t.getGuildId();if((0,y.Bf)(e,g))E(t,e);else if(u.Z.getUploadCount(t.id,n)+e.length>O.dN1){(0,i.xT)({title:b.Z.Messages.ATTACHMENT_TOO_MANY_ERROR_TITLE,help:b.Z.Messages.ATTACHMENT_TOO_MANY_ERROR_MESSAGE.format({limit:O.dN1})});p.default.track(O.rMx.UPLOAD_FILE_LIMIT_ERROR,{existing_count:u.Z.getUploadCount(t.id,n),new_count:e.length})}else{t.type!==O.d4z.GUILD_VOICE&&t.type!==O.d4z.GUILD_STAGE_VOICE||s.Z.getChatOpen(t.id)||r.Z.updateChatOpen(t.id,!0);if(d){
var m=Array.from(e).map((function(e){return{file:e,platform:l.o.WEB}}));o.Z.addFiles({files:m,channelId:t.id,showLargeMessageDialog:_,draftType:n})}else a.Z.instantBatchUpload(t.id,e,n)}}}},418368:(e,t,n)=>{n.d(t,{BK:()=>c,Bf:()=>s,KZ:()=>u});var r=n(251356),o=n(337823),a=n(863419),i=n(298716),l=n(959797);function c(e,t){var n=o.Ng(o.dg(t));return a.ZP.isPremium(e,i.p9.TIER_2)?l.Z.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:n}):a.ZP.isPremium(e,i.p9.TIER_1)?l.Z.Messages.UPLOAD_AREA_TOO_LARGE_HELP_PREMIUM_TIER_1.format({maxSize:n}):l.Z.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:n})}function s(e,t){return o.nA(e,t)||o.vY(e)}function u(e){return e.reduce((function(e,t){t.item.platform===r.o.WEB&&e.push(t.item.file);return e}),[])}}}]);
//# sourceMappingURL=7b2a9694c909f1844a3f.js.map