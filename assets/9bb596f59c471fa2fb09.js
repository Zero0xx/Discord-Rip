"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[33847],{688417:(e,n,t)=>{t.d(n,{Z:()=>p});var r=t(173436),o=t(838478),u=t(183279),i=t(390504),l=t(203271),a=t(228031),c=t(959797);function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function f(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function d(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,u=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){u.push(r.value);if(n&&u.length===n)break}}catch(e){l=!0;o=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return u}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return s(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name)
;if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const p={open:function(e){r.Z.dispatch({type:"NOTIFICATION_SETTINGS_MODAL_OPEN",guildId:e})},close:function(){r.Z.dispatch({type:"NOTIFICATION_SETTINGS_MODAL_CLOSE"})},updateGuildNotificationSettings:function(e,n,t){var o=(0,l.GA)(e);u.Z.saveUserGuildSettings(e,n);r.Z.dispatch({type:"USER_GUILD_SETTINGS_GUILD_UPDATE",guildId:e,settings:n});(0,l.Wq)(e,n,o,t)},updateGuildAndChannelNotificationSettings:function(e,n,t){var o=Object.keys(n.channel_overrides),i=(0,l.GA)(e),a=(0,l.wK)(e,o);u.Z.saveUserGuildSettings(e,n);r.Z.dispatch({type:"USER_GUILD_SETTINGS_GUILD_UPDATE",guildId:e,settings:n});(0,l.Wq)(e,n,i,t);Object.keys(n.channel_overrides).forEach((function(r){var o=a.get(r);(0,
l.jz)(e,r,n.channel_overrides[r],o,t)}))},updateGuildNotificationSettingsBulk:function(e,n){var t=Object.keys(e),o=(0,l.rU)(t);u.Z.saveUserGuildSettingsBulk(e);Object.entries(e).forEach((function(e){var t=d(e,2),u=t[0],i=t[1],a=o.get(u);r.Z.dispatch({type:"USER_GUILD_SETTINGS_GUILD_UPDATE",guildId:u,settings:i});(0,l.Wq)(u,i,a,n)}))},updateChannelOverrideSettings:function(e,n,t,i){var a=(0,l.I)(e,n),s={channel_overrides:f({},n,t)};u.Z.saveUserGuildSettings(e,s);r.Z.dispatch({type:"USER_GUILD_SETTINGS_CHANNEL_UPDATE",guildId:e,channelId:n,settings:t});o.Z.announce(c.Z.Messages.A11Y_ANNOUNCEMENT_CHANNEL_SETTINGS_UPDATED);(0,l.jz)(e,n,t,a,i)},updateChannelOverrideSettingsBulk:function(e,n,t){var o=Object.keys(n),i={channel_overrides:n},a=(0,l.wK)(e,o);u.Z.saveUserGuildSettings(e,i);r.Z.dispatch({type:"USER_GUILD_SETTINGS_CHANNEL_UPDATE_BULK",guildId:e,overrides:n});Object.keys(n).forEach((function(r){return(0,l.jz)(e,r,n[r],a.get(r),t)}))},setForumThreadsCreated:function(e,n){
var t=n?a.ic.NEW_FORUM_THREADS_ON:a.ic.NEW_FORUM_THREADS_OFF,r=n?a.ic.NEW_FORUM_THREADS_OFF:a.ic.NEW_FORUM_THREADS_ON,o=i.Z.getChannelFlags(e)&~r|t;this.updateChannelOverrideSettings(e.guild_id,e.id,{flags:o})}}},97638:(e,n,t)=>{t.d(n,{Fj:()=>A,BK:()=>C,ZP:()=>N});var r=t(785893),o=t(667294),u=t(294184),i=t.n(u),l=t(213192),a=t.n(l),c=t(647446),s=t(892472),f=t(629590),d=t(719455),p=t(469282),h=t(766936),g=t(725002),y=t(170729),v=t(461061),m=t(959797),b=t(544064),E=t.n(b);function _(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function O(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function S(e){S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return S(e)}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){O(e,n,t[n])}))}return e}function T(e,n){return!n||"object"!==P(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function R(e,n){R=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return R(e,n)}var P=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Z(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=S(e);if(n){var o=S(this).constructor;t=Reflect.construct(r,arguments,o)
}else t=r.apply(this,arguments);return T(this,t)}}var w=Object.freeze({SMALL:E().small,MEDIUM:E().medium,LARGE:E().large}),A=a()({MEMBER:null,ROLE:null,CHANNEL:null}),C=function(e){var n,t,o=e.hasContent,u=e.onClear,l=e.className,a=e.themeOverride,c=e.size,s=void 0===c?w.SMALL:c;return(0,r.jsx)(f.Z,{className:i()(l,E().iconLayout,s,(0,y.Q)(a),O({},E().clear,o)),onClick:function(e){e.stopPropagation();null!=u&&u(e)},onMouseDown:function(e){e.preventDefault();e.stopPropagation()},tabIndex:o?0:-1,"aria-hidden":!o,"aria-label":m.Z.Messages.SEARCH_CLEAR,focusProps:{offset:4},children:(0,r.jsxs)("div",{className:E().iconContainer,children:[(0,r.jsx)(p.Z,{className:i()((n={},O(n,E().icon,!0),O(n,E().visible,!o),n))}),(0,r.jsx)(d.Z,{className:i()((t={},O(t,E().icon,!0),O(t,E().visible,o),t))})]})})},j=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{
value:e,writable:!0,configurable:!0}});n&&R(e,n)}(t,e);var n=Z(t);function t(){_(this,t);var e;(e=n.apply(this,arguments)).defaultInputProps={role:"combobox","aria-haspopup":"listbox","aria-autocomplete":"list"};e.ref=o.createRef();e.containerRef=o.createRef();e.handleKeyDown=function(n){var t=e.props,r=t.onActivate,o=t.onKeyDown,u=t.onQueryChange,i=t.useKeyboardNavigation;null!=o&&o(n);var l=e.ref.current;if(null!=l&&null==r)if(n.keyCode===v.yXg.ESCAPE&&null!=l.value&&""!==l.value&&l.value.length>0){l.value="";null!=u&&u("")}else i&&(e.props.gridResults?e.handleKeyDownGrid(n):e.handleKeyDownList(n));else n.keyCode!==v.yXg.TAB&&null!=r&&r(n)};e.handleChange=function(n){var t=e.props.onQueryChange;null!=t&&t(n.currentTarget.value)};e.handleFocus=function(n){var t=e.props.onFocus;null!=t&&t(n)};e.handleClear=function(){var n=e.props.onClear,t=e.ref.current;null!=n&&n();null!=t&&t.focus()};e.handleRemoveTag=function(n){var t=e.props.onRemoveTag;null==t||t(n)};e.focus=function(){
var n=e.ref.current;null!=n&&n.focus()};return e}var u=t.prototype;u.componentDidUpdate=function(e){var n=this.props,t=n.focusAfterReady,r=n.isReady;t&&!e.isReady&&r&&this.focus()};u.handleKeyDownGrid=function(e){var n=this.props,t=n.selectedRow,r=n.selectedColumn,o=n.sections,u=n.query,i=n.tags,l=n.onSelectionChange,a=n.onSelect,c=n.onRemoveTag,s=n.preventEscapePropagation;if(0!==o.length){switch(e.keyCode){case v.yXg.BACKSPACE:if((null==u||0===u.length)&&null!=i&&i.length>0){e.preventDefault();e.stopPropagation();null==c||c(i.length-1)}break;case v.yXg.ARROW_DOWN:e.preventDefault();e.stopPropagation();if(-1===t){t=0;r=0}else{(t+=1)>=o.length&&(t=o.length-1);r>=o[t]&&(r=o[t]-1)}break;case v.yXg.ARROW_UP:e.preventDefault();e.stopPropagation();if((t-=1)<0){t=0;r=0}else r>=o[t]&&(r=o[t]-1);break;case v.yXg.ARROW_LEFT:e.preventDefault();e.stopPropagation();-1===t&&(t=0);if((r-=1)<0)if((t-=1)>=0)r=o[t]-1;else if(t<0){t=0;r=0}break;case v.yXg.ARROW_RIGHT:e.preventDefault()
;e.stopPropagation();-1===t&&(t=0);if((r+=1)>=o[t]){r=0;(t+=1)>=o.length&&(r=o[t=o.length-1]-1)}break;case v.yXg.ENTER:e.preventDefault();e.stopPropagation();-1===t&&(t=0);-1===r&&(r=0);if(t>=o.length||r>=o[t])return;null!=a&&a(t,r,e);return;case v.yXg.ESCAPE:e.preventDefault();s&&e.stopPropagation();null!=a&&a(null,null,e);return;default:return}null!=l&&l(t,r)}};u.handleKeyDownList=function(e){var n=this.props,t=n.sections,r=n.selectedSection,o=n.selectedRow,u=n.onSelect,i=n.onSelectionChange,l=n.query,a=n.tags,c=n.preventEscapePropagation,s=this.ref.current;if(null!=s)switch(e.keyCode){case v.yXg.BACKSPACE:if((null==l||0===l.length)&&null!=a&&a.length>0){var f,d;e.preventDefault();e.stopPropagation();null===(d=(f=this.props).onRemoveTag)||void 0===d||d.call(f,a.length-1)}break;case v.yXg.ARROW_DOWN:e.preventDefault();e.stopPropagation();if(t.length>r&&++o>=t[r]){++r>=t.length&&(r=0);o=0}null==i||i(r,o);break;case v.yXg.ARROW_UP:e.preventDefault();e.stopPropagation();if(--o<0){
--r<0&&(r=t.length-1);o=t[r]-1}null==i||i(r,o);break;case v.yXg.ENTER:e.preventDefault();e.stopPropagation();t.length>r&&t[r]>o&&(null==u||u(r,o,e));break;case v.yXg.ESCAPE:e.preventDefault();c&&e.stopPropagation();null==u||u(null,null,e);s.blur()}};u.render=function(){var e=this,n=this.props,t=n.autoFocus,o=n.query,u=n.placeholder,l=void 0===u?m.Z.Messages.DM_SEARCH_PLACEHOLDER:u,a=n.themeOverride,f=n.disabled,p=n.onClear,v=n.size,b=n.maxHeight,_=n.tags,S=n.onActivate,T=n.className,R=n.inputProps,P=n.focusAfterReady,Z=null!=o&&o.length>0,w=!1,j=[];if(null!=_&&_.length>0)if("string"==typeof _[0]){_.forEach((function(n,t){return j.push((0,r.jsxs)(s.Z,{focusProps:{offset:4},className:E().tag,onClick:e.handleRemoveTag.bind(e,t),children:[n,(0,r.jsx)(d.Z,{className:E().close,"aria-label":m.Z.Messages.REMOVE})]},t))}))}else{w=!0;_.forEach((function(n,t){return j.push((0,r.jsxs)(s.Z,{className:i()(E().tag,E().richTag),onClick:e.handleRemoveTag.bind(e,t),
children:[n.type===A.MEMBER&&n.avatar&&(0,r.jsx)(h.ZP,{src:n.avatar,"aria-hidden":!0,size:h.ZP.Sizes.SIZE_16}),n.type===A.ROLE&&n.color&&(0,r.jsx)("span",{className:E().tagRoleColor,style:{backgroundColor:n.color}}),(0,r.jsx)("span",{className:E().tagLabel,children:n.label}),(0,r.jsx)(d.Z,{className:E().close,"aria-label":m.Z.Messages.REMOVE})]},t))}))}return(0,r.jsx)(c.tE,{focusTarget:this.ref,ringTarget:this.containerRef,children:(0,r.jsx)("div",{ref:this.containerRef,className:i()(T,E().container,v,(0,y.Q)(a),O({},E().disabled,f)),children:(0,r.jsxs)(g.ZP,{className:E().inner,style:{maxHeight:b},children:[j,(0,r.jsx)("input",I({className:i()(E().input,O({},E().richTagInput,w)),type:"text",ref:this.ref,spellCheck:"false",placeholder:l,value:o,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,disabled:f,"aria-disabled":f,autoFocus:!P&&t,onMouseDown:S},this.defaultInputProps,R)),null!=p?(0,r.jsx)(C,{size:v,themeOverride:a,hasContent:Z,
onClear:this.handleClear}):null]})})})};return t}(o.Component);j.Sizes=w;j.defaultProps={size:w.SMALL,query:"",sections:[],selectedSection:0,selectedRow:-1,selectedColumn:-1,gridResults:!1,disabled:!1,autoFocus:!1,preventEscapePropagation:!0,useKeyboardNavigation:!0};const N=j},286451:(e,n,t)=>{t.d(n,{Z:()=>r});const r=(0,t(553494).B)({kind:"guild",id:"2022-11_forum_grid_view",label:"Grid View for Forums",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]})},743175:(e,n,t)=>{t.d(n,{O2:()=>V,Eg:()=>J,W3:()=>ee,ES:()=>ne,kF:()=>te,eV:()=>ue,ur:()=>ie,iM:()=>le,xw:()=>ae,IN:()=>ce,Bs:()=>se,nP:()=>fe,pG:()=>de,Q:()=>pe,n6:()=>he,r_:()=>ge,z2:()=>ye,J$:()=>ve,ql:()=>me,Vm:()=>be,jR:()=>Ee,eZ:()=>_e,XZ:()=>Oe,ku:()=>Se,vP:()=>Ie,SH:()=>Te,M1:()=>Re});var r=t(667294),o=t(496486),u=t.n(o),i=t(123042),l=t(451964),a=t(277563),c=t(791462),s=t(820028),f=t(173436),d=t(320646),p=t(286451),h=t(635940),g=t(536419),y=t(487657),v=t(978571),m=t(60890),b=(t(577028),
t(973381)),E=t(328378),_=t(3056),O=t(437803),S=t(356004),I=t(721777),T=t(210854),R=t(653772),P=t(940712),Z=t(365667),w=t(105405),A=t(475823),C=t(859023),j=t(90816),N=t(103686),D=t(941361),M=t(674455),U=t(829568),L=t(9080),k=t(215219),G=t(232779),x=t(809633),F=t(461061),H=t(35236),W=t(504003);function B(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function X(e,n,t,r,o,u,i){try{var l=e[u](i),a=l.value}catch(e){t(e);return}l.done?n(a):Promise.resolve(a).then(r,o)}function z(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var u=e.apply(n,t);function i(e){X(u,r,o,i,l,"next",e)}function l(e){X(u,r,o,i,l,"throw",e)}i(void 0)}))}}function K(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Y(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e)
;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function q(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return B(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return B(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q=function(e,n){var t,r,o,u,i={label:0,
sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function l(u){return function(l){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;(r=0,o)&&(u=[2&u[0],o.value]);switch(u[0]){case 0:case 1:o=u;break;case 4:i.label++;return{value:u[1],done:!1};case 5:i.label++;r=u[1];u=[0];continue;case 7:u=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1];o=u;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(u);break}o[2]&&i.ops.pop();i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e];r=0}finally{t=o=0}if(5&u[0])throw u[1];return{
value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},V=(0,g.Z)({id:"2021-07_threads_only_channel",label:"Threads only channel",kind:"guild",defaultConfig:{enabled:!1},treatments:[{id:1,label:"On",config:{enabled:!0}},{id:2,label:"On",config:{enabled:!0}}]});function $(e){return V.useExperiment({guildId:e}).enabled}function J(e){return V.getCurrentConfig({guildId:e}).enabled}function ee(e){return $(e)}function ne(e,n,t){var o=(0,c.e7)([b.Z],(function(){return b.Z.hasLoaded(e.guild_id)}));r.useEffect((function(){if(o){var r=D.Z.getThreadIds(e.id,n,t),u=L.Z.getThreadIdsMissingCounts(e.guild_id,r).filter((function(e){return null!=Z.ZP.getTrackedAckMessageId(e)})).map((function(e){return{threadId:e,ackMessageId:Z.ZP.getTrackedAckMessageId(e)}}));u.length>0&&f.Z.dispatch({type:"REQUEST_FORUM_UNREADS",guildId:e.guild_id,channelId:e.id,threads:u})}}),[e.id,e.guild_id,o,t,n])}function te(e){return(0,c.e7)([b.Z,S.Z],(function(){
var n=u()(b.Z.getThreadsForParent(e.guild_id,e.parent_id)).keys().filter((function(e){var n;return!0===(null===(n=S.Z.getChannel(e))||void 0===n?void 0:n.hasFlag(H.zZ.PINNED))})).head();return S.Z.getChannel(n)}))}function re(e){var n=null==e?void 0:e.parent_id;return(0,c.cj)([S.Z],(function(){var e,t=S.Z.getChannel(n);return(null!==(e=null==t?void 0:t.availableTags)&&void 0!==e?e:[]).reduce((function(e,n){return Y(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){K(e,n,t[n])}))}return e}({},e),K({},n.id,n))}),{})}),[n])}var oe=[];function ue(e){var n=re(e);return r.useMemo((function(){var t;return null!==(t=null==e?void 0:e.appliedTags.map((function(e){return n[e]})).filter(j.lm))&&void 0!==t?t:oe}),[n,null==e?void 0:e.appliedTags])}
function ie(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=ue(e);return r.useMemo((function(){return[t.slice(0,n),Math.max(0,t.length-n)]}),[t,n])}function le(e,n){var t=(0,c.Wu)([C.default],(function(){return n.map((function(e){return C.default.getUser(e)}))}));r.useEffect((function(){n.filter((function(e,n){return null==t[n]})).forEach((function(n){T.Z.requestMember(e.guild_id,n)}))}),[]);return t}function ae(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.R6.DURATION_AGO,o=r.useMemo((function(){return a.default.extractTimestamp(e.id)}),[e.id]),u=a.default.extractTimestamp((0,c.e7)([Z.ZP],(function(){return Z.ZP.lastMessageId(e.id)}))),i=r.useMemo((function(){return(0,G.Uw)(n,t)}),[n,t]);return r.useMemo((function(){return n===l.z.CREATION_DATE?(0,O.Ye)(o,i):(0,O.Ye)(u,i)}),[u,n,o,i])}function ce(e){var n;return r.useMemo((function(){return u().maxBy(null!==(n=null==e?void 0:e.reactions)&&void 0!==n?n:[],(function(e){return e.count}))
}),[null==e?void 0:e.reactions])}function se(e){var n=null==e?void 0:e.defaultReactionEmoji,t=(0,c.e7)([I.Z],(function(){return null!=(null==n?void 0:n.emojiId)?I.Z.getUsableCustomEmojiById(n.emojiId):null}));return null==n?null:null!=n.emojiId&&null!=t?{id:n.emojiId,name:t.name,animated:t.animated}:null!=n.emojiName?{id:n.emojiId,name:n.emojiName,animated:!1}:null}function fe(e){var n,t=(0,c.e7)([_.Z],(function(){return null!==(n=_.Z.getCount(e.id))&&void 0!==n?n:0})),r=(0,E.Ws)(t,e.id),o=(0,c.e7)([Z.ZP],(function(){return Z.ZP.hasTrackedUnread(e.id)})),u=(0,c.e7)([Z.ZP],(function(){return Z.ZP.hasOpenedThread(e.id)}));return{messageCount:r,unreadCount:(0,c.e7)([L.Z],(function(){if(!u||!o)return null;var n=L.Z.getCount(e.id);return null!=n&&n>0?n>=W.dg?"".concat(W.dg,"+"):n:"1+"}))}}function de(e){var n=(0,c.e7)([C.default],(function(){return C.default.getUser(e.ownerId)})),t=(0,m.Sw)(n,e);r.useEffect((function(){null!=e.ownerId&&T.Z.requestMember(e.guild_id,e.ownerId)
}),[e.guild_id,e.ownerId]);return{user:n,author:t}}function pe(e){return(0,c.Wu)([A.Z,C.default,w.Z],(function(){var n=C.default.getCurrentUser();return u()(A.Z.getTypingUsers(e.id)).keys().filter((function(e){return e!==(null==n?void 0:n.id)})).reject(w.Z.isBlocked).map((function(e){return C.default.getUser(e)})).filter(j.lm).map((function(e){return e.id})).value()}))}function he(e){var n=e.firstMessage,t=e.formatInline,o=void 0===t||t,u=e.noStyleAndInteraction,i=void 0===u||u,l=r.useMemo((function(){return null!=(null==n?void 0:n.content)&&""!==n.content?(0,v.ZP)(n,{formatInline:o,noStyleAndInteraction:i,allowHeading:!0,allowList:!0}):{hasSpoilerEmbeds:!1,content:null}}),[n,o,i]),a=l.hasSpoilerEmbeds;return{hasSpoilerEmbeds:a,content:l.content,firstMedia:(0,M.eL)(n,a)}}function ge(e){return(0,c.e7)([P.Z],(function(){return P.Z.can(F.Plq.MANAGE_CHANNELS,e)}))}function ye(e){return(0,c.cj)([S.Z,R.Z,Z.ZP],(function(){var n=(0,G.b8)(e,[S.Z,R.Z,Z.ZP]);return null!=n?n:{isNew:!1,
hasUnreads:!1}}))}function ve(e,n){return(0,c.cj)([Z.ZP],(function(){return(0,G.FS)(e,n,[Z.ZP])}))}function me(e){return r.useMemo((function(){return null==e||null==e.template?"":e.template.trim()}),[e])}function be(e){var n=(0,c.e7)([P.Z],(function(){return P.Z.can(F.Plq.MANAGE_THREADS,e)}));return r.useMemo((function(){return q(n?e.availableTags:e.availableTags.filter((function(e){return!e.moderated})))}),[n,e.availableTags])}function Ee(e){return(0,c.e7)([P.Z],(function(){return P.Z.can(F.Plq.READ_MESSAGE_HISTORY,e)}))}function _e(e){return(0,c.e7)([P.Z],(function(){return P.Z.can(F.Plq.READ_MESSAGE_HISTORY,e)}))}function Oe(e){var n=e.channelId;return(0,c.cj)([k.Z],(function(){return{isSearchLoading:k.Z.getSearchLoading(n),searchQuery:k.Z.getSearchQuery(n),searchResults:k.Z.getSearchResults(n)}}))}function Se(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Oe({channelId:e.id}),u=o.isSearchLoading,i=o.searchQuery,l=Ee(e),a=r.useRef(null),c=r.useRef(new Set)
;r.useEffect((function(){if(null!=i||null==a.current){if(null!=i&&0!==i.length&&!t)if(l){if((a.current!==i||c.current!==n)&&!u){var r=setTimeout(z((function(){return Q(this,(function(t){switch(t.label){case 0:a.current=i;c.current=n;t.label=1;case 1:t.trys.push([1,3,,4]);return[4,N.Z.searchForumPosts(e.guild_id,e.id,i,n)];case 2:t.sent();return[3,4];case 3:t.sent();return[3,4];case 4:return[2]}}))})),350);return function(){return clearTimeout(r)}}}else N.Z.clearForumSearch(e.id)}else{N.Z.clearForumSearch(e.id);a.current=null}}),[l,e.guild_id,e.id,t,u,i,n])}function Ie(e){var n=e.channel,t=e.sortOrder,o=e.tagFilter,u=e.shouldAutomaticallyAck,i=(0,c.Wu)([D.Z],(function(){return D.Z.getThreadIds(n.id,t,o)})),l=(0,c.e7)([D.Z],(function(){return u&&D.Z.getCanAckThreads()}),[u]);r.useEffect((function(){l&&(0,d.U6)(n)}),[n,l]);return i}function Te(e){var n=p.Z.useExperiment({guildId:null!=e?e:"0"}).enabled,t=y.Z.useExperiment({}).enableForumGridView;return n||t}function Re(e){
var n=ge(e),t=(0,h.un)(s.z$.FORUM_CHANNEL_GRID_VIEW_UPSELL),o=$(e.guild_id),u=Te(e.guild_id),l=r.useRef(e.getDefaultLayout()!==i.X.GRID),a=(0,c.cj)([U.Z,D.Z],(function(){var e=D.Z.getCurrentThreadIds().map((function(e){return U.Z.getMessage(e)})),n=!e.some((function(e){return e.loaded}));if(n)return{meetsThreshold:!1,loading:!0};var t=e.map((function(e){return e.firstMessage})).filter(j.lm);return 0===t.length?{meetsThreshold:!1,loading:!1}:{meetsThreshold:t.filter((function(e){return e.attachments.some(M.As)})).length/t.length>.7,loading:n}})),f=a.loading,d=a.meetsThreshold,p=!t&&n&&o&&u&&l.current;return{showGridViewUpsell:p,shouldAutoEnabledGridView:d&&p,gridViewUpsellLoading:f&&p}}},674455:(e,n,t)=>{t.d(n,{As:()=>h,zy:()=>v,eL:()=>m,CB:()=>b});var r=t(3056),o=t(409271),u=t(356004),i=t(171447),l=t(859023),a=t(90816),c=t(6349);function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function f(e){return function(e){
if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return s(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){if(null==e)return!1;var n=e.filename,t=e.height,r=e.width;return c.IQ.test(n)&&null!=t&&t>0&&null!=r&&r>0}function p(e){return null!=e&&(null!=e&&c.XH.test(e.filename)&&null!=e.proxy_url)}function h(e){return d(e)||p(e)}function g(e){var n=o.x4.useSetting(),t=null==e?void 0:e.attachments;return null!=e&&null!=t&&n?t.filter(h).map((function(e){
var n=e.proxy_url,t=e.url,r=e.description,o=e.spoiler,u=e.width,i=e.height,l=e.filename;return null==u||null==i?null:{src:c.XH.test(l)?"".concat(n,"?format=jpeg"):null!=n?n:t,width:u,height:i,spoiler:null!=o&&o,alt:r}})).filter(a.lm):[]}function y(e,n){var t=o.RS.useSetting(),r=o.NA.useSetting();if(null==e)return[];var u=e.embeds;return t&&r&&null!=u?u.map((function(e){var t,r=null!==(t=e.image)&&void 0!==t?t:e.thumbnail;null==r&&null!=e.images&&(r=e.images[0]);if(null!=r&&null!=r.url){var o=r.height,u=r.proxyURL,i=r.url;return{src:null!=u&&""!==u?u:i,height:o,width:r.width,spoiler:n}}})).filter(a.lm):[]}function v(e,n){var t=g(e),r=y(e,n);return f(t).concat(f(r))}function m(e,n){var t,r,o=g(e),u=y(e,n);return null!==(r=null!==(t=o[0])&&void 0!==t?t:u[0])&&void 0!==r?r:null}function b(e,n){var t,o=u.Z.getChannel(n);if(null==o)return!1;var a=i.Z.getMessage(o.id,o.id);return null!=a&&(e.length>0&&null!=e.find((function(e){return e.isImage||e.isVideo
}))&&o.isForumPost()&&o.ownerId===(null===(t=l.default.getCurrentUser())||void 0===t?void 0:t.id)&&0===r.Z.getCount(o.id)&&(0===a.attachments.length||null==a.attachments.find((function(e){return d(e)||p(e)}))))}},9080:(e,n,t)=>{t.d(n,{Z:()=>b});var r=t(441143),o=t.n(r),u=t(791462),i=t(173436),l=t(973381),a=t(356004),c=t(365667);function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function d(e,n){return!n||"object"!==h(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function p(e,n){p=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return p(e,n)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var n=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return d(this,t)}}var y={},v=new Set;var m=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&p(e,n)}(t,e);var n=g(t);function t(){s(this,t);return n.apply(this,arguments)}var r=t.prototype;r.initialize=function(){this.waitFor(l.Z,a.Z,c.ZP)};r.getCount=function(e){return y[e]};r.getThreadIdsMissingCounts=function(e,n){o()(l.Z.hasLoaded(e),"must wait for THREAD_LIST_SYNC before calling this");return n.filter((function(e){
return!(e in y)&&!v.has(e)}))};r.__getLocalVars=function(){return{counts:y,loadingThreadIds:v}};return t}(u.ZP.Store);m.displayName="ForumPostUnreadCountStore";const b=new m(i.Z,{CONNECTION_OPEN:function(){y={};v=new Set},THREAD_CREATE:function(e){var n=e.channel;if(!e.isNewlyCreated)return!1;if(!l.Z.hasLoaded(n.guild_id))return!1;y[n.id]=0},MESSAGE_CREATE:function(e){var n=e.channelId,t=e.optimistic,r=e.isPushNotification;if(t||r)return!1;if(!(n in y))return!1;y[n]++},FORUM_UNREADS:function(e){e.threads.forEach((function(e){null!=e.count&&(y[e.threadId]=e.count)}))},MESSAGE_ACK:function(e){var n=e.channelId;if(!(n in y)){var t=a.Z.getChannel(n),r=a.Z.getChannel(null==t?void 0:t.parent_id);if(!(null==r?void 0:r.isForumChannel()))return!1}y[n]=c.ZP.getUnreadCount(n)},REQUEST_FORUM_UNREADS:function(e){e.threads.forEach((function(e){var n=e.threadId;return v.add(n)}))}})},215219:(e,n,t)=>{t.d(n,{Z:()=>m});var r=t(791462),o=t(173436);function u(e,n){
if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e){i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return i(e)}function l(e,n){return!n||"object"!==c(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function a(e,n){a=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return a(e,n)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function s(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=i(e);if(n){var o=i(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments)
;return l(this,t)}}var f=null,d=!1,p=null,h=null;function g(){f=null;p=null;d=!1;h=null}function y(e){if(h!==e){h=e;g()}}var v=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&a(e,n)}(t,e);var n=s(t);function t(){u(this,t);return n.apply(this,arguments)}var r=t.prototype;r.getSearchQuery=function(e){y(e);return f};r.getSearchLoading=function(e){y(e);return d};r.getSearchResults=function(e){y(e);return p};r.__getLocalVars=function(){return{searchQuery:f,searchLoading:d,searchResults:p,selectedChannelId:h}};return t}(r.ZP.Store);v.displayName="ForumSearchStore";const m=new v(o.Z,{CONNECTION_OPEN:g,FORUM_SEARCH_QUERY_UPDATED:function(e){var n=e.channelId,t=e.query;y(n);f=t;h=n;null!=t&&""!=t||(p=null)},FORUM_SEARCH_START:function(e){e.channelId===h&&(d=!0)},FORUM_SEARCH_SUCCESS:function(e){
var n=e.channelId,t=e.threadIds;if(n===h){d=!1;p=t}},FORUM_SEARCH_FAILURE:function(e){if(e.channelId===h){d=!1;p=[]}},FORUM_SEARCH_CLEAR:function(e){if(e.channelId===h){p=null;f=null;d=!1}}})},328378:(e,n,t)=>{t.d(n,{Ws:()=>i,WE:()=>a});var r=t(346529),o=t(504003),u=t(959797),i=function(e,n){if(null==e||e<0)return"0";var t=function(e){return r.Z.compare("992549565104128000",e)>-1}(n);return(null==n||t)&&e>=o.vw?"50+":e>=o.M3?"100k+":"".concat(e)},l=function(e,n,t){var r=i(e,t);return"0"===r?u.Z.Messages.SEE_THREAD:n.format({count:r})},a=function(e,n){return l(e,u.Z.Messages.THREAD_MESSAGE_COUNT,n)}},475823:(e,n,t)=>{t.d(n,{Z:()=>T});var r=t(791462),o=t(675860),u=t(173436),i=t(631134),l=t(429753),a=t(461061);function c(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function f(e){
f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){s(e,n,t[n])}))}return e}function p(e,n){return!n||"object"!==g(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function h(e,n){h=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return h(e,n)}var g=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return p(this,t)}}var v,m={},b=Object.freeze({});function E(e){var n;return null!==(n=m[e])&&void 0!==n?n:b}function _(e){var n=e.channelId,t=e.userId,r=d({},E(n));clearTimeout(r[t]);r[t]=function(e,n){return setTimeout((function(){u.Z.dispatch({type:"TYPING_STOP",channelId:e,userId:n})}),a.I2i)}(n,t);m[n]=r}function O(e){var n=e.channelId,t=e.userId,r=m[n];if(null==r||null==r[t])return!1;var o=d({},r);clearTimeout(o[t]);delete o[t];m[n]=o}function S(){m={}}var I=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&h(e,n)}(t,e);var n=y(t);function t(){c(this,t)
;return n.apply(this,arguments)}var r=t.prototype;r.getTypingUsers=function(e){return E(e)};r.isTyping=function(e,n){return null!=E(e)[n]};r.__getLocalVars=function(){return{typingUsersByChannel:m,localTypingDelay:v,EMPTY_TYPING:b}};return t}(r.ZP.Store);I.displayName="TypingStore";const T=new I(u.Z,{TYPING_START:_,TYPING_STOP:O,TYPING_START_LOCAL:function(e){var n=e.channelId,t=i.default.getId();if(null==t)return!1;if(null!=v&&v.channelId!==n){null!=v.timeout&&clearTimeout(v.timeout);v=null}var r=Date.now(),c=.8*a.I2i;if(null!=v&&(null!=v.timeout||v.prevSend+c>r))return!1;var s=null==v||v.prevSend>r-2*c?a.WQ8:0,f=setTimeout((function(){if(null!=v&&v.channelId===n&&t===i.default.getId()&&null!=v.timeout){v.timeout=null;(function(e){var n=E(e);return n===b?0:Object.keys(n).length})(n)>a.WiX||o.Z.post({url:a.ANM.TYPING(n),oldFormErrors:!0}).then((function(e){if(200===e.status){
var t,r,o=null!==(t=e.body.message_send_cooldown_ms)&&void 0!==t?t:0,i=null!==(r=e.body.thread_create_cooldown_ms)&&void 0!==r?r:0;o>0&&u.Z.dispatch({type:"SLOWMODE_SET_COOLDOWN",channelId:n,slowmodeType:l.S.SendMessage,cooldownMs:o});i>0&&u.Z.dispatch({type:"SLOWMODE_SET_COOLDOWN",channelId:n,slowmodeType:l.S.CreateThread,cooldownMs:i})}}))}}),s);v={channelId:n,timeout:f,prevSend:r};return _({channelId:n,userId:t})},TYPING_STOP_LOCAL:function(e){var n=e.channelId,t=i.default.getId();if(null==t)return!1;if(null!=v&&v.channelId===n&&null!=v.timeout){clearTimeout(v.timeout);v=null;return O({channelId:n,userId:t})}return!1},CONNECTION_OPEN:S,OVERLAY_INITIALIZE:S,MESSAGE_CREATE:function(e){var n=e.channelId,t=e.message.author;e.optimistic&&function(e){if(null==v||v.channelId!==e)return!1;null!=v.timeout&&clearTimeout(v.timeout);v=null}(n);return O({channelId:n,userId:t.id})}})}}]);
//# sourceMappingURL=9bb596f59c471fa2fb09.js.map